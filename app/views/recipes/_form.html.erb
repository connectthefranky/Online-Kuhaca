
<%= form_for @recipe, html: { multipart: true } do |f| %>
    <div class="col-xs-offset-3 col-xs-6 error">
      <% if @recipe.errors.any? %>
          <div class="panel panel-danger">
            <div class = "panel-heading">
              <h3><%= pluralize(@recipe.errors.count, "error") %> prohibited this recipe from being saved:</h3>

            </div>

            <ul>
              <% @recipe.errors.full_messages.each do |message| %>
                  <li><%= message %></li>
              <% end %>
            </ul>
          </div>
      <% end %>
    </div>


    <div class = "row">
      <div class = "col-xs-12">
        <div class="form-group">
          <div class="well well-group col-sm-8 col-sm-offset-2">
            <%= f.label :naslov %><br>
            <%= f.text_field :title, class: "form-control", placeholder: "Upišite naziv recepta" %>
          </div>
        </div>
        <div class="form-group">
          <div class="well well-group col-sm-8 col-sm-offset-2">
            <%= f.label :opis %><br>
            <%= f.text_area :description, rows: 8, class: "form-control", placeholder: "Upišite opis izrade recepta" %>
          </div>
        </div>

        <div class="col-sm-8 col-sm-offset-2">
          <ul id = "list-group">
            <li class="list-group-item active"><h3 id="ingredients-list-title" align = "center">Lista sastojaka</h3></li>
          </ul>
        </div>

        <%=f.text_area :ingredients, id: "hidden-area" %>

        <div class="well well-group col-sm-8 col-sm-offset-2">
          <form class="form-inline">
            <div class="form-group">
              <label class="sr-only" for="exampleInputEmail3">Measure</label>
              <input type="text" class="form-control" id="measure" placeholder="Measure">
            </div>
            <div class="form-group">
              <label class="sr-only" for="exampleInputPassword3">Ingredient</label>
              <input type="text" class="form-control" id="ingredient" placeholder="Ingredient">
            </div>
            <button type="button" id = "add-to-list" class="btn btn-default" id="add-ingredient">Dodaj sastojak</button>
            <script>
              document.getElementById("add-to-list").onclick = function () {
                var list = document.getElementById("list-group");
                var measure = document.getElementById("measure").value;
                var ingredient = document.getElementById("ingredient").value;
                var hidden = document.getElementById("hidden-area")

                var newLI = document.createElement("li");
                var input = measure + " " + ingredient;
                hidden.value = hidden.value + "\n" + input
                newLI.innerHTML = input;
                newLI.className = newLI.className + "list-group-item show";
                list.appendChild(newLI);
              }
            </script>
          </form>
        </div>

        <div class="form-group">
          <div class="well well-group col-sm-4 col-sm-offset-2">
            <%= f.label :slika %><br>
            <%= f.file_field :image, accept: "image/*", class: "form-control-file", placeholder: "Dodajte sliku" %>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-offset-6 col-sm-2 create-recipe">
            <%= f.submit "Izradi recept",  class: "btn btn-primary btn-lg " %>
          </div>
        </div>
      </div>
    </div>
<% end %>
